{"dependencies":[{"name":"/Users/senecamac1/henry/playing-with-tensorflow/fitting-a-curve/package.json","includedInParent":true,"mtime":1522495589000},{"name":"/Users/senecamac1/henry/playing-with-tensorflow/fitting-a-curve/node_modules/vega-transforms/package.json","includedInParent":true,"mtime":1520278057000},{"name":"vega-util","loc":{"line":1,"column":26}}],"generated":{"js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ValidWindowOps = exports.WindowOps = undefined;\nexports.WindowOp = WindowOp;\n\nvar _vegaUtil = require('vega-util');\n\nfunction WindowOp(op, field, param, as) {\n  var fn = WindowOps[op](field, param);\n  return {\n    init: fn.init || _vegaUtil.zero,\n    update: function (w, t) {\n      t[as] = fn.next(w);\n    }\n  };\n}\n\nvar WindowOps = exports.WindowOps = {\n  row_number: function () {\n    return {\n      next: function (w) {\n        return w.index + 1;\n      }\n    };\n  },\n  rank: function () {\n    var rank;\n    return {\n      init: function () {\n        rank = 1;\n      },\n      next: function (w) {\n        var i = w.index,\n            data = w.data;\n        return i && w.compare(data[i - 1], data[i]) ? rank = i + 1 : rank;\n      }\n    };\n  },\n  dense_rank: function () {\n    var drank;\n    return {\n      init: function () {\n        drank = 1;\n      },\n      next: function (w) {\n        var i = w.index,\n            d = w.data;\n        return i && w.compare(d[i - 1], d[i]) ? ++drank : drank;\n      }\n    };\n  },\n  percent_rank: function () {\n    var rank = WindowOps.rank(),\n        next = rank.next;\n    return {\n      init: rank.init,\n      next: function (w) {\n        return (next(w) - 1) / (w.data.length - 1);\n      }\n    };\n  },\n  cume_dist: function () {\n    var cume;\n    return {\n      init: function () {\n        cume = 0;\n      },\n      next: function (w) {\n        var i = w.index,\n            d = w.data,\n            c = w.compare;\n        if (cume < i) {\n          while (i + 1 < d.length && !c(d[i], d[i + 1])) ++i;\n          cume = i;\n        }\n        return (1 + cume) / d.length;\n      }\n    };\n  },\n  ntile: function (field, num) {\n    num = +num;\n    if (!(num > 0)) (0, _vegaUtil.error)('ntile num must be greater than zero.');\n    var cume = WindowOps.cume_dist(),\n        next = cume.next;\n    return {\n      init: cume.init,\n      next: function (w) {\n        return Math.ceil(num * next(w));\n      }\n    };\n  },\n\n  lag: function (field, offset) {\n    offset = +offset || 1;\n    return {\n      next: function (w) {\n        var i = w.index - offset;\n        return i >= 0 ? field(w.data[i]) : null;\n      }\n    };\n  },\n  lead: function (field, offset) {\n    offset = +offset || 1;\n    return {\n      next: function (w) {\n        var i = w.index + offset,\n            d = w.data;\n        return i < d.length ? field(d[i]) : null;\n      }\n    };\n  },\n\n  first_value: function (field) {\n    return {\n      next: function (w) {\n        return field(w.data[w.i0]);\n      }\n    };\n  },\n  last_value: function (field) {\n    return {\n      next: function (w) {\n        return field(w.data[w.i1 - 1]);\n      }\n    };\n  },\n  nth_value: function (field, nth) {\n    nth = +nth;\n    if (!(nth > 0)) (0, _vegaUtil.error)('nth_value nth must be greater than zero.');\n    return {\n      next: function (w) {\n        var i = w.i0 + (nth - 1);\n        return i < w.i1 ? field(w.data[i]) : null;\n      }\n    };\n  }\n};\n\nvar ValidWindowOps = exports.ValidWindowOps = Object.keys(WindowOps);"},"hash":"1bfb4a528fbf35fbd5c7768b1eab3d61","cacheData":{"env":{}}}